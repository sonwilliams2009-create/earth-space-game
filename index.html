<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ECHS KY Earth & Space Science Bellwork</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#05051a;
  color:white;
  text-align:center;
}

header{
  background:#111;
  padding:15px;
  border-bottom:3px solid orange;
  color:#00e5ff;
  font-size:22px;
  font-weight:bold;
}

.screen{display:none;padding:30px;}

button,input,select{
  padding:12px;
  margin:10px;
  border-radius:10px;
  border:none;
  font-size:16px;
}

button{
  background:#ff9800;
  cursor:pointer;
  font-weight:bold;
}

button:hover{
  background:white;
  color:black;
}

.card{
  background:#111;
  padding:20px;
  margin:20px auto;
  border-radius:15px;
  max-width:600px;
  box-shadow:0 0 10px black;
}

#answers button{
  display:block;
  width:80%;
  margin:10px auto;
}
</style>
</head>

<body>

<header>üåç ECHS KY Earth & Space Science Bellwork</header>

<!-- MAIN MENU -->
<div id="mainMenu" class="screen" style="display:block;">
  <div class="card">
    <h2>Main Menu</h2>
    <p>Select your role:</p>
    <button onclick="showScreen('studentLogin')">üë©‚Äçüéì Student Login</button>
    <button onclick="showScreen('teacherLogin')">üë®‚Äçüè´ Teacher Login</button>
  </div>
</div>

<!-- STUDENT LOGIN -->
<div id="studentLogin" class="screen">
  <div class="card">
    <h2>Student Login</h2>
    <input id="studentUser" placeholder="Enter Username">
    <button onclick="studentLogin()">Login</button>
    <button onclick="showScreen('mainMenu')">‚¨Ö Back</button>
  </div>
</div>

<!-- TEACHER LOGIN -->
<div id="teacherLogin" class="screen">
  <div class="card">
    <h2>Teacher Login</h2>
    <input id="teacherPass" type="password" placeholder="Password">
    <button onclick="teacherLogin()">Login</button>
    <button onclick="showScreen('mainMenu')">‚¨Ö Back</button>
  </div>
</div>

<!-- TEACHER DASHBOARD -->
<div id="teacherDash" class="screen">
  <div class="card">
    <h2>Teacher Dashboard</h2>

    <h3>Add Student</h3>
    <input id="newStudent" placeholder="Student Username">
    <button onclick="addStudent()">Add</button>

    <h3>Assign Unit</h3>
    <select id="studentSelect"></select>
    <select id="unitSelect"></select>
    <button onclick="assignUnit()">Assign Unit</button>

    <h3>Assignments</h3>
    <div id="assignments"></div>

    <button onclick="showScreen('mainMenu')">Logout</button>
  </div>
</div>

<!-- STUDENT MENU -->
<div id="studentMenu" class="screen">
  <div class="card">
    <h2 id="welcomeStudent"></h2>
    <h3>Your Assigned Unit:</h3>
    <p id="studentUnitText"></p>

    <button onclick="startQuiz()">Start Bellwork</button>
    <button onclick="showScreen('mainMenu')">Logout</button>
  </div>
</div>

<!-- QUIZ SCREEN -->
<div id="quizScreen" class="screen">
  <div class="card">
    <h2 id="quizTitle"></h2>
    <p id="questionText"></p>
    <div id="answers"></div>
  </div>
</div>

<script>
/* ================= SCREEN CONTROL ================= */
function showScreen(id){
  document.querySelectorAll(".screen").forEach(s=>s.style.display="none");
  document.getElementById(id).style.display="block";
}

/* ================= LOCAL DATABASE ================= */
let students = JSON.parse(localStorage.getItem("students")) || {};
let currentStudent = "";
let currentUnit = "";
let quizIndex = 0;
let score = 0;

/* ================= FULL QUESTION BANK ================= */
const units = {
  "Unit 1: Big Bang & Universe": [
    {q:"What did the Big Bang create?", a:["Earth","The Universe"], correct:1},
    {q:"Age of the Universe?", a:["13.8 billion years","2 million years"], correct:0},
    {q:"Galaxies are moving...", a:["Toward each other","Away from each other"], correct:1}
  ],

  "Unit 2: Stars & Life Cycle": [
    {q:"A star forms from...", a:["Nebula","Ocean"], correct:0},
    {q:"Our Sun is a...", a:["Red Giant","Main Sequence star"], correct:1},
    {q:"Supernova creates...", a:["Heavy elements","Water"], correct:0}
  ],

  "Unit 3: Solar System": [
    {q:"Largest planet?", a:["Jupiter","Mars"], correct:0},
    {q:"Earth is the ___ planet from Sun", a:["3rd","5th"], correct:0},
    {q:"Asteroid belt is between...", a:["Mars & Jupiter","Earth & Venus"], correct:0}
  ],

  "Unit 4: Earth Layers": [
    {q:"Earth‚Äôs densest layer?", a:["Mantle","Inner Core"], correct:1},
    {q:"Magnetic field comes from...", a:["Outer Core","Crust"], correct:0},
    {q:"Crust is...", a:["Thickest layer","Thinnest layer"], correct:1}
  ],

  "Unit 5: Plate Tectonics": [
    {q:"Divergent boundaries...", a:["Move apart","Collide"], correct:0},
    {q:"Ring of Fire surrounds...", a:["Pacific","Atlantic"], correct:0},
    {q:"Plates float on the...", a:["Asthenosphere","Inner Core"], correct:0}
  ],

  "Unit 6: Earthquakes": [
    {q:"Earthquake energy travels as...", a:["Waves","Clouds"], correct:0},
    {q:"Instrument that measures quakes?", a:["Seismograph","Barometer"], correct:0},
    {q:"Focus is...", a:["Origin underground","Surface crack"], correct:0}
  ],

  "Unit 7: Volcanoes": [
    {q:"Magma becomes lava when...", a:["Underground","At surface"], correct:1},
    {q:"Most volcanoes occur at...", a:["Plate boundaries","Deserts"], correct:0},
    {q:"Shield volcano is...", a:["Wide & gentle","Steep cone"], correct:0}
  ],

  "Unit 8: Weathering & Erosion": [
    {q:"Breaking rocks apart is...", a:["Weathering","Fusion"], correct:0},
    {q:"Moving sediment is...", a:["Erosion","Condensation"], correct:0},
    {q:"Water causes...", a:["Both","Neither"], correct:0}
  ]
};

/* Populate Unit Dropdown */
function loadUnits(){
  let unitSelect = document.getElementById("unitSelect");
  unitSelect.innerHTML="";
  Object.keys(units).forEach(u=>{
    let opt=document.createElement("option");
    opt.value=u;
    opt.textContent=u;
    unitSelect.appendChild(opt);
  });
}

/* Populate Student Dropdown */
function loadStudents(){
  let studentSelect=document.getElementById("studentSelect");
  studentSelect.innerHTML="";
  Object.keys(students).forEach(name=>{
    let opt=document.createElement("option");
    opt.value=name;
    opt.textContent=name;
    studentSelect.appendChild(opt);
  });
  refreshAssignments();
}

/* ================= TEACHER ================= */
function teacherLogin(){
  if(document.getElementById("teacherPass").value==="caves"){
    showScreen("teacherDash");
    loadUnits();
    loadStudents();
  } else {
    alert("Wrong password");
  }
}

function addStudent(){
  let name=document.getElementById("newStudent").value.trim();
  if(!name) return alert("Enter username");

  if(students[name]){
    alert("Student already exists");
    return;
  }

  students[name]={unit:null};
  localStorage.setItem("students", JSON.stringify(students));

  alert("Student Added!");
  document.getElementById("newStudent").value="";
  loadStudents();
}

function assignUnit(){
  let student=document.getElementById("studentSelect").value;
  let unit=document.getElementById("unitSelect").value;

  if(!student) return alert("No student selected!");

  students[student].unit=unit;
  localStorage.setItem("students", JSON.stringify(students));

  alert(student+" assigned to "+unit);
  refreshAssignments();
}

function refreshAssignments(){
  let div=document.getElementById("assignments");
  div.innerHTML="";
  for(let s in students){
    div.innerHTML+=`${s} ‚Üí ${students[s].unit || "No Unit Assigned"}<br>`;
  }
}

/* ================= STUDENT ================= */
function studentLogin(){
  let name=document.getElementById("studentUser").value.trim();
  if(!students[name]){
    alert("Student not found üò≠");
    return;
  }

  currentStudent=name;
  currentUnit=students[name].unit;

  if(!currentUnit){
    alert("No unit assigned yet!");
    return;
  }

  document.getElementById("welcomeStudent").innerText="Welcome, "+name+"!";
  document.getElementById("studentUnitText").innerText=currentUnit;

  showScreen("studentMenu");
}

/* ================= QUIZ ================= */
function startQuiz(){
  quizIndex=0;
  score=0;
  showScreen("quizScreen");
  showQuestion();
}

function showQuestion(){
  let questions=units[currentUnit];
  let q=questions[quizIndex];

  document.getElementById("quizTitle").innerText=currentUnit;
  document.getElementById("questionText").innerText=q.q;

  let ansDiv=document.getElementById("answers");
  ansDiv.innerHTML="";

  q.a.forEach((choice,i)=>{
    let btn=document.createElement("button");
    btn.textContent=choice;
    btn.onclick=()=>checkAnswer(i);
    ansDiv.appendChild(btn);
  });
}

function checkAnswer(i){
  let questions=units[currentUnit];
  if(i===questions[quizIndex].correct){
    score+=10;
  }

  quizIndex++;
  if(quizIndex<questions.length){
    showQuestion();
  } else {
    alert("Bellwork Complete! Score: "+score);
    showScreen("studentMenu");
  }
}
</script>

</body>
</html>
