<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ğŸŒŒ ECHS KY - Earth & Space Science ğŸŒ</title>
<style>
body{
  margin:0;
  font-family:'Comic Sans MS', cursive, sans-serif;
  background:linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
  color:white;
  text-align:center;
}
.screen{display:none;padding:30px;} 
#login{display:block;}
button,input,select{
  padding:10px 15px;
  margin:10px;
  border-radius:12px;
  border:none;
  font-size:16px;
  transition:0.2s;
}
button{
  background:linear-gradient(to right, #ff416c, #ff4b2b);
  cursor:pointer;
  font-weight:bold;
}
button:hover{
  transform:scale(1.1);
  background:linear-gradient(to right, #fddb92, #d1fdff);
  color:black;
}
h1{
  background:#111;
  color:#00e5ff;
  padding:15px;
  font-size:26px;
  border-bottom:4px solid orange;
}
label input{
  transform:scale(1.3);
  margin-right:8px;
}
#unitAssignList{
  text-align:left;
  max-width:500px;
  margin:0 auto;
}
#credits{
  font-size:12px;
  color:#ffcc00;
  margin-bottom:10px;
}
</style>
</head>
<body>

<div id="credits">Lead Dev: Gabriel | Code Fixes: ChatGPT</div>

<h1>ğŸŒŒ ECHS KY â€“ Earth & Space Science ğŸŒ</h1>

<!-- MUSIC -->
<button id="musicBtn">ğŸ”‡ Music OFF</button>

<!-- LOGIN -->
<div id="login" class="screen">
<h2>Student Login ğŸ˜</h2>
<input id="studentName" placeholder="Enter your username">
<button id="studentLoginBtn">Let's gooo ğŸš€</button>

<h2>Teacher Login ğŸ‘©â€ğŸ«</h2>
<input id="teacherPass" type="password" placeholder="Password">
<button id="teacherLoginBtn">Enter Dashboard ğŸ–¥ï¸</button>
</div>

<!-- TEACHER DASHBOARD -->
<div id="dashboard" class="screen">
<h2>Teacher Dashboard ğŸ“</h2>

<h3>Add New Student â•</h3>
<input id="newStudentName" placeholder="Student Name">
<button id="addStudentBtn">Add Student</button>

<h3>Assign Full Units to Student ğŸ“š</h3>
<select id="selectStudentDropdown"></select>
<button id="assignAllBtn">Assign All Units ğŸ’ª</button>

<h3>Leaderboard ğŸ†</h3>
<div id="board"></div>
<button onclick="show('login')">Logout ğŸ”™</button>
</div>

<!-- STUDENT MENU -->
<div id="studentMenu" class="screen">
<h2>Your Terms & Units ğŸŒˆ</h2>
<div id="termButtons"></div>
<button onclick="show('login')">Logout ğŸ”™</button>
</div>

<!-- UNIT QUIZ -->
<div id="game" class="screen">
<h2 id="unitTitle">Unit</h2>
<p id="question"></p>
<div id="answers"></div>
</div>

<script>
/* ================= GLOBAL ================= */
let currentStudent="", currentTerm="", currentUnitKey="", currentUnitData=null, currentQuestionIndex=0, score=0;

/* MUSIC */
let music = new Audio("menu-music.mp3"); music.loop=true; music.volume=0.3;
document.getElementById("musicBtn").onclick=function(){
  if(music.paused){ music.play().catch(()=>alert("Tap to allow music")); this.innerText="ğŸ”Š Music ON"; }
  else{ music.pause(); this.innerText="ğŸ”‡ Music OFF"; }
};

/* STUDENTS STORAGE */
let students={};

/* UNITS & TERMS */
const courseUnits={
unit1:"Unit 1: Big Bang & Universe",
unit2:"Unit 2: Stars & Galaxies",
unit3:"Unit 3: Solar System & Planet Motion",
unit4:"Unit 4: Gravity & Orbital Mechanics",
unit5:"Unit 5: Earth Interior & Layers",
unit6:"Unit 6: Plate Tectonics",
unit7:"Unit 7: Earthquakes",
unit8:"Unit 8: Volcanoes & Mountains",
unit9:"Unit 9: Weather Systems",
unit10:"Unit 10: Climate Change",
unit11:"Unit 11: Oceans & Currents",
unit12:"Unit 12: Earth Resources",
unit13:"Unit 13: Human Impact",
unit14:"Unit 14: Moon & Tides",
unit15:"Unit 15: Space Exploration",
unit16:"Unit 16: Meteorology",
unit17:"Unit 17: Magnetic Field & Auroras",
unit18:"Unit 18: Rocks & Minerals",
unit19:"Unit 19: Geologic Time & Fossils",
unit20:"Unit 20: Final Review"
};
const terms = {
term1:["unit1","unit2","unit3","unit4","unit5"],
term2:["unit6","unit7","unit8","unit9","unit10"],
term3:["unit11","unit12","unit13","unit14","unit15"],
term4:["unit16","unit17","unit18","unit19","unit20"]
};

/* ================= FULL QUESTION BANK ================= */
const questionBank={
unit1:[
  {q:"The Big Bang explainsâ€¦",a:[{text:"Origin of universe",correct:true},{text:"Oceans",correct:false},{text:"Earth",correct:false}]},
  {q:"The universe is approximatelyâ€¦",a:[{text:"13.8 billion years old",correct:true},{text:"1 million years old",correct:false},{text:"4.5 billion years",correct:false}]},
  {q:"Galaxies are movingâ€¦",a:[{text:"Away from each other",correct:true},{text:"Toward each other",correct:false},{text:"Stationary",correct:false}]}
],
unit2:[
  {q:"A light year measuresâ€¦",a:[{text:"Distance",correct:true},{text:"Time",correct:false},{text:"Brightness",correct:false}]},
  {q:"The Sun is aâ€¦",a:[{text:"Star",correct:true},{text:"Planet",correct:false},{text:"Moon",correct:false}]},
  {q:"Our galaxy is calledâ€¦",a:[{text:"Milky Way",correct:true},{text:"Andromeda",correct:false},{text:"Triangulum",correct:false}]}
],
unit3:[
  {q:"Planets orbit the sun becauseâ€¦",a:[{text:"Gravity",correct:true},{text:"Magnetism",correct:false},{text:"Wind",correct:false}]},
  {q:"Earth completes one orbit inâ€¦",a:[{text:"1 year",correct:true},{text:"24 hours",correct:false},{text:"1 month",correct:false}]},
  {q:"The planets are mostlyâ€¦",a:[{text:"Spherical",correct:true},{text:"Flat",correct:false},{text:"Cubic",correct:false}]}
],
unit4:[
  {q:"Gravity affectsâ€¦",a:[{text:"All objects with mass",correct:true},{text:"Only planets",correct:false},{text:"Only stars",correct:false}]},
  {q:"Gravity keepsâ€¦",a:[{text:"Planets in orbit",correct:true},{text:"Stars together",correct:false},{text:"Nothing",correct:false}]},
  {q:"Weight isâ€¦",a:[{text:"A measure of gravity",correct:true},{text:"Mass",correct:false},{text:"Density",correct:false}]}
],
unit5:[
  {q:"Earthâ€™s magnetic field comes fromâ€¦",a:[{text:"Outer core",correct:true},{text:"Crust",correct:false},{text:"Mantle",correct:false}]},
  {q:"Earthâ€™s densest layer isâ€¦",a:[{text:"Inner core",correct:true},{text:"Mantle",correct:false},{text:"Crust",correct:false}]},
  {q:"The crust isâ€¦",a:[{text:"Thin outer layer",correct:true},{text:"Very thick",correct:false},{text:"Liquid",correct:false}]}
],
unit6:[
  {q:"Plate tectonics explainsâ€¦",a:[{text:"Continental movement",correct:true},{text:"Earthquakes only",correct:false},{text:"Volcanoes only",correct:false}]},
  {q:"Divergent platesâ€¦",a:[{text:"Move apart",correct:true},{text:"Collide",correct:false},{text:"Slide past",correct:false}]},
  {q:"Ring of Fire surroundsâ€¦",a:[{text:"Pacific Ocean",correct:true},{text:"Atlantic Ocean",correct:false},{text:"Indian Ocean",correct:false}]}
],
unit7:[
  {q:"Earthquakes occur due toâ€¦",a:[{text:"Tectonic movement",correct:true},{text:"Weather",correct:false},{text:"Volcanoes",correct:false}]},
  {q:"The point inside Earth where an earthquake starts is calledâ€¦",a:[{text:"Focus",correct:true},{text:"Epicenter",correct:false},{text:"Fault",correct:false}]},
  {q:"The surface point above focus isâ€¦",a:[{text:"Epicenter",correct:true},{text:"Focus",correct:false},{text:"Fault",correct:false}]}
],
unit8:[
  {q:"Volcanoes form whenâ€¦",a:[{text:"Magma reaches surface",correct:true},{text:"Water freezes",correct:false},{text:"Plates collide silently",correct:false}]},
  {q:"Mountains can form fromâ€¦",a:[{text:"Plate collision",correct:true},{text:"Erosion",correct:false},{text:"Ocean currents",correct:false}]},
  {q:"Active volcanoes areâ€¦",a:[{text:"Currently erupting or may erupt",correct:true},{text:"Extinct",correct:false},{text:"Dormant forever",correct:false}]}
],
unit9:[
  {q:"Weather systems are caused byâ€¦",a:[{text:"Atmosphere movement",correct:true},{text:"Earthquakes",correct:false},{text:"Gravity alone",correct:false}]},
  {q:"Cold fronts bringâ€¦",a:[{text:"Storms",correct:true},{text:"Heat waves",correct:false},{text:"Volcanoes",correct:false}]},
  {q:"Warm fronts bringâ€¦",a:[{text:"Cloudy skies",correct:true},{text:"Snow",correct:false},{text:"Tornadoes",correct:false}]}
],
unit10:[
  {q:"Climate change is caused byâ€¦",a:[{text:"Human activity & greenhouse gases",correct:true},{text:"Gravity",correct:false},{text:"Plate movement only",correct:false}]},
  {q:"Global warming affectsâ€¦",a:[{text:"Weather & ecosystems",correct:true},{text:"Only oceans",correct:false},{text:"Only mountains",correct:false}]},
  {q:"Carbon dioxide comes mainly fromâ€¦",a:[{text:"Fossil fuels",correct:true},{text:"Rocks",correct:false},{text:"Sunlight",correct:false}]}
],
unit11:[
  {q:"Oceans coverâ€¦",a:[{text:"~71% of Earth's surface",correct:true},{text:"50%",correct:false},{text:"25%",correct:false}]},
  {q:"Currents are driven byâ€¦",a:[{text:"Wind & temperature",correct:true},{text:"Gravity alone",correct:false},{text:"Volcanoes",correct:false}]},
  {q:"The largest ocean isâ€¦",a:[{text:"Pacific",correct:true},{text:"Atlantic",correct:false},{text:"Indian",correct:false}]}
],
unit12:[
  {q:"Earth's resources includeâ€¦",a:[{text:"Water, minerals, soil",correct:true},{text:"Sunlight only",correct:false},{text:"Air only",correct:false}]},
  {q:"Renewable resourcesâ€¦",a:[{text:"Can be replenished",correct:true},{text:"Cannot be replaced",correct:false},{text:"Are infinite",correct:false}]},
  {q:"Fossil fuels areâ€¦",a:[{text:"Non-renewable",correct:true},{text:"Renewable",correct:false},{text:"Abundant",correct:false}]}
],
unit13:[
  {q:"Human impact includesâ€¦",a:[{text:"Pollution & deforestation",correct:true},{text:"Volcanoes",correct:false},{text:"Earthquakes",correct:false}]},
  {q:"Climate action helpsâ€¦",a:[{text:"Protect ecosystems",correct:true},{text:"Increase CO2",correct:false},{text:"Stop gravity",correct:false}]},
  {q:"Recycling reducesâ€¦",a:[{text:"Waste & pollution",correct:true},{text:"Gravity",correct:false},{text:"Earthquakes",correct:false}]}
],
unit14:[
  {q:"Tides are caused byâ€¦",a:[{text:"Moon's gravity",correct:true},{text:"Sunlight",correct:false},{text:"Wind",correct:false}]},
  {q:"High tides occur whenâ€¦",a:[{text:"Moon is overhead",correct:true},{text:"Sun is shining",correct:false},{text:"Earthquakes happen",correct:false}]},
  {q:"The moon affectsâ€¦",a:[{text:"Oceans",correct:true},{text:"Mountains",correct:false},{text:"Atmosphere only",correct:false}]}
],
unit15:[
  {q:"Space exploration began withâ€¦",a:[{text:"Satellites & rockets",correct:true},{text:"Planes",correct:false},{text:"Cars",correct:false}]},
  {q:"First human in spaceâ€¦",a:[{text:"Yuri Gagarin",correct:true},{text:"Neil Armstrong",correct:false},{text:"Buzz Aldrin",correct:false}]},
  {q:"International Space Station isâ€¦",a:[{text:"Orbiting lab",correct:true},{text:"Moon base",correct:false},{text:"Mars colony",correct:false}]}
],
unit16:[
  {q:"Meteorology studiesâ€¦",a:[{text:"Weather & atmosphere",correct:true},{text:"Stars",correct:false},{text:"Oceans",correct:false}]},
  {q:"Weather prediction usesâ€¦",a:[{text:"Satellites & models",correct:true},{text:"Tides only",correct:false},{text:"Gravity only",correct:false}]},
  {q:"Storms form due toâ€¦",a:[{text:"Air pressure differences",correct:true},{text:"Earthquakes",correct:false},{text:"Magnetism",correct:false}]}
],
unit17:[
  {q:"Earthâ€™s magnetic field comes fromâ€¦",a:[{text:"Liquid outer core",correct:true},{text:"Mantle",correct:false},{text:"Crust",correct:false}]},
  {q:"Auroras occur nearâ€¦",a:[{text:"Poles",correct:true},{text:"Equator",correct:false},{text:"Mountains",correct:false}]},
  {q:"Magnetic polesâ€¦",a:[{text:"Shift slowly",correct:true},{text:"Never move",correct:false},{text:"Spin daily",correct:false}]}
],
unit18:[
  {q:"Rocks are classified asâ€¦",a:[{text:"Igneous, sedimentary, metamorphic",correct:true},{text:"Metal only",correct:false},{text:"Liquid only",correct:false}]},
  {q:"Minerals areâ€¦",a:[{text:"Naturally occurring solids",correct:true},{text:"Man-made",correct:false},{text:"Gas",correct:false}]},
  {q:"Sedimentary rocks form fromâ€¦",a:[{text:"Sediment compaction",correct:true},{text:"Cooling magma",correct:false},{text:"Pressure alone",correct:false}]}
],
unit19:[
  {q:"Fossils areâ€¦",a:[{text:"Remains of organisms",correct:true},{text:"Rocks only",correct:false},{text:"Water bodies",correct:false}]},
  {q:"Geologic time measuresâ€¦",a:[{text:"Earth's history",correct:true},{text:"1 year",correct:false},{text:"1 century",correct:false}]},
  {q:"Index fossils helpâ€¦",a:[{text:"Date rock layers",correct:true},{text:"Predict weather",correct:false},{text:"Measure gravity",correct:false}]}
],
unit20:[
  {q:"Final Review: The Big Bang createdâ€¦",a:[{text:"The Universe",correct:true},{text:"Earth",correct:false},{text:"Sun",correct:false}]},
  {q:"Earthquakes are caused byâ€¦",a:[{text:"Plate movements",correct:true},{text:"Wind",correct:false},{text:"Volcanoes only",correct:false}]},
  {q:"Renewable resources includeâ€¦",a:[{text:"Water, solar, wind",correct:true},{text:"Coal only",correct:false},{text:"Oil only",correct:false}]}
};

/* ================= SCREEN CONTROL & TEACHER FUNCTIONS ================= */
function show(id){ document.querySelectorAll(".screen").forEach(s=>s.style.display="none"); document.getElementById(id).style.display="block"; }
document.getElementById("addStudentBtn").onclick=function(){
  const name=document.getElementById("newStudentName").value.trim();
  if(!name) return alert("Enter a name!");
  if(students[name]) return alert("Student already exists!");
  let allowedUnits={}, scores={term1:0,term2:0,term3:0,term4:0,total:0};
  for(let term in terms){ allowedUnits[term]={}; terms[term].forEach(u=> allowedUnits[term][u]=true);}
  students[name]={allowedUnits,scores};
  document.getElementById("newStudentName").value="";
  populateStudentDropdown(); loadLeaderboard(); alert(`Student ${name} added! ğŸ‰`);
}
function populateStudentDropdown(){
  const select=document.getElementById("selectStudentDropdown"); select.innerHTML="";
  for(let s in students) select.innerHTML+=`<option value="${s}">${s}</option>`;
}
document.getElementById("assignAllBtn").onclick=function(){
  const student=document.getElementById("selectStudentDropdown").value;
  if(!student) return alert("Select a student!");
  for(let term in terms) terms[term].forEach(u=> students[student].allowedUnits[term][u]=true);
  alert(`${student} now has all units assigned! âœ…`); loadLeaderboard();
}
function loadLeaderboard(){
  const div=document.getElementById("board"); div.innerHTML="";
  for(let s in students) div.innerHTML+=`${s} : ${students[s].scores.total} pts<br>`;
}

/* ================= LOGIN ================= */
document.getElementById("teacherLoginBtn").onclick=function(){
  if(document.getElementById("teacherPass").value==="caves"){ show("dashboard"); populateStudentDropdown(); loadLeaderboard(); } 
  else alert("Wrong password ğŸ˜­");
};
document.getElementById("studentLoginBtn").onclick=function(){
  const name=document.getElementById("studentName").value.trim();
  if(!name) return alert("Enter username!");
  if(!students[name]) return alert("Student not found ğŸ˜­");
  currentStudent=name; show("studentMenu"); buildTermButtons();
};

/* ================= STUDENT MENU ================= */
function buildTermButtons(){
  const div=document.getElementById("termButtons"); div.innerHTML="";
  const allowed=students[currentStudent].allowedUnits;
  for(let term in allowed){
    let btn=document.createElement("button");
    btn.innerText=`${term.toUpperCase()} ğŸŸ¢`;
    btn.onclick=()=>showUnitButtons(term);
    div.appendChild(btn);
  }
}
function showUnitButtons(term){
  currentTerm=term;
  const div=document.getElementById("termButtons"); div.innerHTML="";
  const allowed=students[currentStudent].allowedUnits[term];
  for(let u in allowed){
    if(allowed[u]){
      let btn=document.createElement("button");
      btn.innerText=courseUnits[u];
      btn.onclick=()=>startUnit(u);
      div.appendChild(btn);
    }
  }
  div.innerHTML+="<br><button onclick='buildTermButtons()'>â¬…ï¸ Back to Terms</button>";
}

/* ================= QUIZ ================= */
function startUnit(uKey){
  currentUnitKey=uKey;
  currentUnitData=JSON.parse(JSON.stringify(questionBank[uKey]));
  currentQuestionIndex=0; score=0;
  show("game"); showQuestion();
}
function showQuestion(){
  if(!currentUnitData || currentQuestionIndex>=currentUnitData.length){ finishUnit(); return; }
  let q=currentUnitData[currentQuestionIndex];
  document.getElementById("unitTitle").innerText=courseUnits[currentUnitKey];
  document.getElementById("question").innerText=q.q;
  const div=document.getElementById("answers"); div.innerHTML="";
  q.a.forEach(a=>{
    let btn=document.createElement("button");
    btn.innerText=a.text;
    btn.onclick=()=>checkAnswer(a.correct);
    div.appendChild(btn);
  });
}
function checkAnswer(correct){
  if(correct) score+=10;
  currentQuestionIndex++;
  showQuestion();
}
function finishUnit(){
  students[currentStudent].scores[currentTerm]+=score;
  students[currentStudent].scores.total+=score;
  alert(`Unit Complete! Score: ${score} ğŸ’¯`);
  show("studentMenu"); buildTermButtons(); loadLeaderboard();
}
</script>
</body>
</html>
