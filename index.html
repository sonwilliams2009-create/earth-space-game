<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Earth & Space Science Classroom</title>
<style>
body{
margin:0;
font-family:Arial;
background:radial-gradient(circle at center,#000010,#000000);
color:white;
text-align:center;
}
.screen{display:none;padding:40px;}
.active{display:block;}
button,input{
padding:10px;
margin:10px;
border-radius:8px;
border:none;
}
button{background:#ff9800;cursor:pointer;}
button:hover{background:white;color:black;}
.card{
background:rgba(0,0,0,0.85);
padding:20px;
border-radius:15px;
max-width:650px;
margin:auto;
}
.answer{
display:block;
margin:10px auto;
width:80%;
padding:10px;
background:#111;
color:white;
border:1px solid orange;
}
.answer:hover{background:orange;color:black;}
table{margin:auto;background:black;padding:10px;}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login" class="screen active">
<h1>üåçüåå Earth & Space Science Game</h1>
<h2>Student Login</h2>
<input id="studentName" placeholder="Username">
<button onclick="studentLogin()">Login</button>
<p>Ask your teacher for your username.</p>
<button onclick="show('teacherLogin')">Teacher Login</button>
</div>

<!-- TEACHER LOGIN -->
<div id="teacherLogin" class="screen">
<h2>Teacher Login</h2>
<input id="teacherPass" type="password" placeholder="Password">
<button onclick="teacherLogin()">Login</button>
<button onclick="show('login')">Back</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="screen">
<h1>üë©‚Äçüè´ Teacher Dashboard</h1>

<h3>Create Students</h3>
<input id="newStudent" placeholder="Student username">
<button onclick="addStudent()">Add Student</button>

<h3>Unlock Topics for Students</h3>
<select id="selectStudent" onchange="loadStudentUnlocks()"></select><br>
<label><input type="checkbox" id="stage1"> Big Bang & Universe</label><br>
<label><input type="checkbox" id="stage2"> Earth Layers & Caves</label><br>
<label><input type="checkbox" id="stage3"> Volcanoes & Plate Tectonics</label><br>
<label><input type="checkbox" id="stage4"> Oceans & Trenches</label><br>
<label><input type="checkbox" id="stage5"> Solar System & Space Missions</label><br>
<label><input type="checkbox" id="stage6"> Rock Cycle</label><br>
<label><input type="checkbox" id="stage7"> Weather & Climate</label><br>
<label><input type="checkbox" id="stage8"> Earth Resources & Conservation</label><br>
<label><input type="checkbox" id="stage9"> Earthquakes & Plate Boundaries</label><br>
<button onclick="saveUnlocks()">Save Unlocks</button>

<h2>üèÜ Leaderboard</h2>
<div id="board"></div>
<button onclick="resetBoard()">Reset Leaderboard</button>
<button onclick="teacherLogout()">Logout</button>
</div>

<!-- STUDENT GAME -->
<div id="studentGame" class="screen">
<h1>üß≠ Choose a Topic</h1>
<div id="stageButtons"></div>
</div>

<div id="game" class="screen">
<div class="card">
<h2 id="stageTitle"></h2>
<p id="question"></p>
<div id="answers"></div>
<p>‚≠ê Score: <span id="score">0</span></p>
</div>
</div>

<script>
// ---------- GLOBAL VARIABLES ----------
const teacherPassword = "caves"; // hidden password
let currentStudent = "";
let score = 0;
let currentStage = null;
let currentQuestionIndex = 0;

// ---------- QUIZ DATA ----------
const stages = {
stage1:{title:"üí• Big Bang & Universe", questions:[
{q:"The Big Bang theory explains the origin of?", a:[{text:"The universe",correct:true},{text:"Earth",correct:false},{text:"Sun",correct:false}]},
{q:"The Cosmic Microwave Background is?", a:[{text:"Radiation from early universe",correct:true},{text:"A type of star",correct:false},{text:"Planetary dust",correct:false}]},
{q:"Edwin Hubble discovered galaxies are?", a:[{text:"Expanding away",correct:true},{text:"Stationary",correct:false},{text:"Collapsing",correct:false}]}
]},
stage2:{title:"üåé Earth Layers & Caves", questions:[
{q:"Which layer generates Earth's magnetic field?", a:[{text:"Outer Core",correct:true},{text:"Crust",correct:false},{text:"Mantle",correct:false}]},
{q:"Mammoth Cave is famous for?", a:[{text:"Longest cave system",correct:true},{text:"Deepest cave",correct:false},{text:"Oldest cave",correct:false}]},
{q:"Which is Earth's densest layer?", a:[{text:"Inner Core",correct:true},{text:"Crust",correct:false},{text:"Mantle",correct:false}]}
]},
stage3:{title:"üåã Volcanoes & Plate Tectonics", questions:[
{q:"Mauna Loa is what type of volcano?", a:[{text:"Shield",correct:true},{text:"Composite",correct:false},{text:"Cinder",correct:false}]},
{q:"Earthquakes occur mainly at?", a:[{text:"Plate boundaries",correct:true},{text:"Plate centers",correct:false},{text:"Inside continents",correct:false}]},
{q:"Ring of Fire is?", a:[{text:"Volcanic region around Pacific",correct:true},{text:"Volcanic region in Atlantic",correct:false}]}
]},
stage4:{title:"üåä Oceans & Trenches", questions:[
{q:"Mariana Trench formed by?", a:[{text:"Subduction",correct:true},{text:"Erosion",correct:false},{text:"Sedimentation",correct:false}]},
{q:"Largest ocean?", a:[{text:"Pacific",correct:true},{text:"Atlantic",correct:false},{text:"Indian",correct:false}]},
{q:"Ocean currents are caused by?", a:[{text:"Wind & rotation",correct:true},{text:"Earthquakes",correct:false},{text:"Tides only",correct:false}]}
]},
stage5:{title:"ü™ê Solar System & Space Missions", questions:[
{q:"Perseverance rover explores?", a:[{text:"Mars",correct:true},{text:"Venus",correct:false},{text:"Moon",correct:false}]},
{q:"Moon's surface is?", a:[{text:"Regolith",correct:true},{text:"Water",correct:false},{text:"Rocky soil",correct:false}]},
{q:"Sun is a?", a:[{text:"Star",correct:true},{text:"Planet",correct:false},{text:"Asteroid",correct:false}]}
]},
stage6:{title:"ü™® Rock Cycle", questions:[
{q:"Igneous rocks are formed by?", a:[{text:"Cooling of magma or lava",correct:true},{text:"Compression of sediments",correct:false},{text:"Metamorphism",correct:false}]},
{q:"Which type of rock can change into metamorphic rock?", a:[{text:"Igneous and sedimentary",correct:true},{text:"Only sedimentary",correct:false},{text:"Only igneous",correct:false}]},
{q:"Sedimentary rocks are formed mainly by?", a:[{text:"Accumulation and compression of sediments",correct:true},{text:"Melting and cooling",correct:false},{text:"Heat and pressure",correct:false}]}
]},
stage7:{title:"‚òÅÔ∏è Weather & Climate", questions:[
{q:"What drives Earth's weather?", a:[{text:"Sun's energy",correct:true},{text:"Moon's gravity",correct:false},{text:"Earthquakes",correct:false}]},
{q:"Climate is defined as?", a:[{text:"Average weather over time",correct:true},{text:"Daily weather",correct:false},{text:"Air pressure only",correct:false}]}
]},
stage8:{title:"üå± Earth Resources & Conservation", questions:[
{q:"Fossil fuels are?", a:[{text:"Nonrenewable resources",correct:true},{text:"Renewable resources",correct:false},{text:"Water sources",correct:false}]},
{q:"Recycling helps?", a:[{text:"Conserve resources",correct:true},{text:"Increase pollution",correct:false},{text:"Destroy ecosystems",correct:false}]}
]},
stage9:{title:"üåê Earthquakes & Plate Boundaries", questions:[
{q:"Where do most earthquakes occur?", a:[{text:"Plate boundaries",correct:true},{text:"Plate interiors",correct:false},{text:"Ocean centers",correct:false}]},
{q:"Seismic waves are?", a:[{text:"Energy waves from earthquakes",correct:true},{text:"Ocean waves",correct:false},{text:"Wind waves",correct:false}]}
]}
};

// ---------- LOCAL STORAGE DATA ----------
let students = JSON.parse(localStorage.getItem("students")) || {};
let leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || {};

// ---------- UI FUNCTIONS ----------
function show(id){
document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

// ---------- TEACHER LOGIN ----------
function teacherLogin(){
let pass = document.getElementById("teacherPass").value;
if(pass === teacherPassword){
show("dashboard");
loadStudents();
loadLeaderboard();
} else alert("Wrong password");
}
function teacherLogout(){ show("login"); }

// ---------- STUDENT MANAGEMENT ----------
function addStudent(){
let name = document.getElementById("newStudent").value.trim();
if(!name){alert("Enter username"); return;}
if(!students[name]) students[name] = {stage1:false,stage2:false,stage3:false,stage4:false,stage5:false,stage6:false,stage7:false,stage8:false,stage9:false, score:0};
localStorage.setItem("students",JSON.stringify(students));
document.getElementById("newStudent").value="";
loadStudents();
alert("Student added");
}

function loadStudents(){
let select = document.getElementById("selectStudent");
select.innerHTML="";
for(let s in students){
let opt = document.createElement("option");
opt.value = s; opt.text = s; select.add(opt);
}
loadStudentUnlocks();
}

function loadStudentUnlocks(){
let s = document.getElementById("selectStudent").value;
let unlocks = students[s];
if(!unlocks) return;
for(let i=1;i<=9;i++){
document.getElementById("stage"+i).checked = unlocks["stage"+i];
}
}

function saveUnlocks(){
let s = document.getElementById("selectStudent").value;
for(let i=1;i<=9;i++){
students[s]["stage"+i] = document.getElementById("stage"+i).checked;
}
localStorage.setItem("students",JSON.stringify(students));
alert("Unlocks saved for "+s);
}

// ---------- STUDENT LOGIN ----------
function studentLogin(){
let name = document.getElementById("studentName").value.trim();
if(!students[name]){alert("Username not found"); return;}
currentStudent = name;
loadStudentStages();
}

function loadStudentStages(){
let div = document.getElementById("stageButtons");
div.innerHTML="";
let unlocks = students[currentStudent];
for(let i=1;i<=9;i++){
if(unlocks["stage"+i]){
let btn = document.createElement("button");
btn.innerText = stages["stage"+i].title;
btn.onclick = ()=>startStage("stage"+i);
div.appendChild(btn);
}
}
show("studentGame");
}

// ---------- GAME LOGIC ----------
function startStage(key){
score=0; currentQuestionIndex=0; currentStage=stages[key]; show("game"); showQuestion();
}

function showQuestion(){
let q = currentStage.questions[currentQuestionIndex];
document.getElementById("stageTitle").innerText = currentStage.title;
document.getElementById("question").innerText = q.q;
let div = document.getElementById("answers"); div.innerHTML="";
q.a.forEach(a=>{
let btn = document.createElement("button");
btn.className = "answer"; btn.innerText = a.text;
btn.onclick = ()=>checkAnswer(a.correct);
div.appendChild(btn);
});
}

function checkAnswer(correct){
if(correct) score+=20;
currentQuestionIndex++;
if(currentQuestionIndex < currentStage.questions.length){ showQuestion(); }
else{
students[currentStudent].score += score;
localStorage.setItem("students",JSON.stringify(students));
alert("Topic Complete! Score: "+score);
loadStudentStages();
loadLeaderboard();
}
}

// ---------- LEADERBOARD ----------
function loadLeaderboard(){
let html="<table><tr><th>Name</th><th>Score</th></tr>";
for(let s in students){
html += "<tr><td>"+s+"</td><td>"+students[s].score+"</td></tr>";
}
html+="</table>";
document.getElementById("board").innerHTML = html;
}

function resetBoard(){
for(let s in students) students[s].score = 0;
localStorage.setItem("students",JSON.stringify(students));
loadLeaderboard();
}
</script>
</body>
</html>
