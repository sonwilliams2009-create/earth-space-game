<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Earth & Space Science Classroom</title>
<style>
body{
margin:0;
font-family:Arial;
background:radial-gradient(circle at center,#000010,#000000);
color:white;
text-align:center;
}
.screen{display:none;padding:40px;}
.active{display:block;}
button,input{
padding:10px;
margin:10px;
border-radius:8px;
border:none;
}
button{background:#ff9800;cursor:pointer;}
button:hover{background:white;color:black;}
.card{
background:rgba(0,0,0,0.85);
padding:20px;
border-radius:15px;
max-width:650px;
margin:auto;
}
.answer{
display:block;
margin:10px auto;
width:80%;
padding:10px;
background:#111;
color:white;
border:1px solid orange;
}
.answer:hover{background:orange;color:black;}
table{margin:auto;background:black;padding:10px;}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login" class="screen active">
<h1>üåçüåå Earth & Space Science Game</h1>
<h2>Student Login</h2>
<input id="studentName" placeholder="Username">
<button onclick="studentLogin()">Login</button>
<p>Ask your teacher for your username.</p>
<button onclick="showTeacherLogin()">Teacher Login</button>
</div>

<!-- TEACHER LOGIN -->
<div id="teacherLogin" class="screen">
<h2>Teacher Login</h2>
<input id="teacherPass" type="password" placeholder="Password">
<button onclick="teacherLogin()">Login</button>
<button onclick="show('login')">Back</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="screen">
<h1>üë©‚Äçüè´ Teacher Dashboard</h1>

<h3>Create Students</h3>
<input id="newStudent" placeholder="Student username">
<button onclick="addStudent()">Add Student</button>

<h3>Unlock Topics for Students</h3>
<select id="selectStudent"></select><br>
<label><input type="checkbox" id="stage1"> Big Bang & Universe</label><br>
<label><input type="checkbox" id="stage2"> Earth Layers & Caves</label><br>
<label><input type="checkbox" id="stage3"> Volcanoes & Plate Tectonics</label><br>
<label><input type="checkbox" id="stage4"> Oceans & Trenches</label><br>
<label><input type="checkbox" id="stage5"> Solar System & Space Missions</label><br>
<button onclick="saveUnlocks()">Save Unlocks</button>

<h2>üèÜ Leaderboard</h2>
<div id="board"></div>
<button onclick="resetBoard()">Reset Leaderboard</button>
</div>

<!-- STUDENT GAME -->
<div id="studentGame" class="screen">
<h1>üß≠ Choose a Topic</h1>
<div id="stageButtons"></div>
</div>

<div id="game" class="screen">
<div class="card">
<h2 id="stageTitle"></h2>
<p id="question"></p>
<div id="answers"></div>
<p>‚≠ê Score: <span id="score">0</span></p>
</div>
</div>

<script>
let teacherPassword = "caves"; // hidden, not displayed
let currentStudent="";
let score=0;
let currentStage=null;
let currentQuestionIndex=0;

// Topics with multiple questions
const stages = {
stage1:{title:"üí• Big Bang & Universe", questions:[
{q:"The Big Bang theory explains the origin of?", a:[{text:"The universe",correct:true},{text:"Earth",correct:false},{text:"Sun",correct:false}]},
{q:"The Cosmic Microwave Background is?", a:[{text:"Radiation from early universe",correct:true},{text:"A type of star",correct:false},{text:"Planetary dust",correct:false}]},
{q:"Edwin Hubble discovered galaxies are?", a:[{text:"Expanding away",correct:true},{text:"Stationary",correct:false},{text:"Collapsing",correct:false}]}
]},
stage2:{title:"üåé Earth Layers & Caves", questions:[
{q:"Which layer generates Earth's magnetic field?", a:[{text:"Outer Core",correct:true},{text:"Crust",correct:false},{text:"Mantle",correct:false}]},
{q:"Mammoth Cave is famous for?", a:[{text:"Longest cave system",correct:true},{text:"Deepest cave",correct:false},{text:"Oldest cave",correct:false}]},
{q:"Which is Earth's densest layer?", a:[{text:"Inner Core",correct:true},{text:"Crust",correct:false},{text:"Mantle",correct:false}]}
]},
stage3:{title:"üåã Volcanoes & Plate Tectonics", questions:[
{q:"Mauna Loa is what type of volcano?", a:[{text:"Shield",correct:true},{text:"Composite",correct:false}]},
{q:"Earthquakes occur mainly at?", a:[{text:"Plate boundaries",correct:true},{text:"Plate centers",correct:false}]},
{q:"Ring of Fire is?", a:[{text:"Volcanic region around Pacific",correct:true},{text:"Volcanic region in Atlantic",correct:false}]}
]},
stage4:{title:"üåä Oceans & Trenches", questions:[
{q:"Mariana Trench formed by?", a:[{text:"Subduction",correct:true},{text:"Erosion",correct:false}]},
{q:"Largest ocean?", a:[{text:"Pacific",correct:true},{text:"Atlantic",correct:false}]},
{q:"Ocean currents are caused by?", a:[{text:"Wind & rotation",correct:true},{text:"Earthquakes",correct:false}]}
]},
stage5:{title:"ü™ê Solar System & Space Missions", questions:[
{q:"Perseverance rover explores?", a:[{text:"Mars",correct:true},{text:"Venus",correct:false}]},
{q:"Moon's surface is?", a:[{text:"Regolith",correct:true},{text:"Water",correct:false}]},
{q:"Sun is a?", a:[{text:"Star",correct:true},{text:"Planet",correct:false}]}
]}
};

// Student list & unlocks stored in localStorage
let students = JSON.parse(localStorage.getItem("students")) || {};
let leaderboard = JSON.parse(localStorage.getItem("board")) || {};

// ---------- UI Functions ----------
function show(id){
document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

// --- Teacher Login ---
function showTeacherLogin(){show('teacherLogin');}
function teacherLogin(){
if(document.getElementById("teacherPass").value===teacherPassword){
show("dashboard");
loadStudents();
loadLeaderboard();
}else alert("Wrong password");
}

// --- Manage Students ---
function addStudent(){
let name=document.getElementById("newStudent").value.trim();
if(!name){alert("Enter username"); return;}
if(!students[name]) students[name]={};
localStorage.setItem("students",JSON.stringify(students));
document.getElementById("newStudent").value="";
loadStudents();
alert("Student added");
}

function loadStudents(){
let select=document.getElementById("selectStudent");
select.innerHTML="";
for(let s in students){
let opt=document.createElement("option");
opt.value=s; opt.text=s;
select.add(opt);
}
loadStudentUnlocks();
}

function loadStudentUnlocks(){
let s = document.getElementById("selectStudent").value;
let unlocks = students[s] || {};
for(let i=1;i<=5;i++){
document.getElementById("stage"+i).checked=unlocks["stage"+i]||false;
}
}

document.getElementById("selectStudent").addEventListener("change",loadStudentUnlocks);

function saveUnlocks(){
let s = document.getElementById("selectStudent").value;
students[s]={};
for(let i=1;i<=5;i++){
students[s]["stage"+i]=document.getElementById("stage"+i).checked;
}
localStorage.setItem("students",JSON.stringify(students));
alert("Unlocks saved for "+s);
}

// --- Student Login ---
function studentLogin(){
let name=document.getElementById("studentName").value.trim();
if(!students[name]){alert("Username not found, ask teacher"); return;}
currentStudent=name;
loadStudentStages();
}

function loadStudentStages(){
let div=document.getElementById("stageButtons");
div.innerHTML="";
let unlocks = students[currentStudent];
for(let i=1;i<=5;i++){
if(unlocks["stage"+i]){
let btn=document.createElement("button");
btn.innerText=stages["stage"+i].title;
btn.onclick=()=>startStage("stage"+i);
div.appendChild(btn);
}
}
show("studentGame");
}

// --- Game Logic ---
function startStage(key){
score=0; currentQuestionIndex=0;
currentStage=stages[key];
show("game");
showQuestion();
}

function showQuestion(){
let q=currentStage.questions[currentQuestionIndex];
document.getElementById("stageTitle").innerText=currentStage.title;
document.getElementById("question").innerText=q.q;
let div=document.getElementById("answers");
div.innerHTML="";
q.a.forEach(a=>{
let btn=document.createElement("button");
btn.className="answer"; btn.innerText=a.text;
btn.onclick=()=>checkAnswer(a.correct);
div.appendChild(btn);
});
}

function checkAnswer(correct){
if(correct)score+=20;
currentQuestionIndex++;
if(currentQuestionIndex<currentStage.questions.length){
showQuestion();
}else{
saveScore();
alert("Topic Complete! Score: "+score);
loadStudentStages();
}
}

function saveScore(){
if(!leaderboard[currentStudent]) leaderboard[currentStudent]=0;
leaderboard[currentStudent]+=score;
localStorage.setItem("board",JSON.stringify(leaderboard));
loadLeaderboard();
}

// --- Leaderboard ---
function loadLeaderboard(){
let html="<table><tr><th>Name</th><th>Score</th></tr>";
for(let s in leaderboard){
html+="<tr><td>"+s+"</td><td>"+leaderboard[s]+"</td></tr>";
}
html+="</table>";
document.getElementById("board").innerHTML=html;
}

function resetBoard(){
leaderboard={}; localStorage.setItem("board",JSON.stringify(leaderboard));
loadLeaderboard();
}
</script>

</body>
</html>
